<div class="widgets">
  <div class="row">
    <div class="col-lg-12">
      <nb-card>
        <nb-card-header>Auditoria</nb-card-header>
        <nb-card-body *ngIf="audit.audit_type">
          <div class="row justify-content-end" *ngIf="downloadPath">
            <a [href]="downloadPath" class="btn btn-outline-primary btn-icon" target="_blank">
              <div><i class="ion-archive"></i></div>
            </a>
          </div>
          <div class="row">
            <div class="col">
              <label><strong>Tipo de auditoria</strong></label>
              <div>
                {{audit.audit_type.name}}
              </div>
            </div>
            <div class="col">
              <label><strong>Fecha</strong></label>
              <div>
                {{audit.created_at}}
              </div>
            </div>
            <div class="col">
              <label><strong>Turno</strong></label>
              <div>
                {{audit.shift}}
              </div>
            </div>

          </div>
          <div class="row" style="margin-top: 1rem; margin-bottom: 1rem;">
            <div class="col">
              <label><strong>Tienda</strong></label>
              <div>
                {{audit.store}}
              </div>
            </div>
            <div class="col">
              <label><strong>Jefe de turno</strong></label>
              <div>
                {{audit.manager}}
              </div>
            </div>
            <div class="col">
              <label><strong>Nota</strong></label>
              <div>
                {{audit.score | percent}}
              </div>
            </div>
          </div>
          <div class="row" *ngIf="audit && audit.audit_type">
            <div class="col-lg-12">
              <div></div>
              <table class="table table-bordered" *ngFor="let section of audit.audit_type.sections">
                <thead>
                <tr>
                  <th colspan="5">{{section.name}}</th>
                </tr>
                <tr>
                  <th style="width: 40%">REVISION</th>
                  <th style="width: 20%">CALIFICACION</th>
                  <th style="width: 40%">OBSERVACION</th>
                </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let revision of section.revisions">
                    <td>{{revision.name}}</td>
                    <td>
                      {{revision.classification}}
                    </td>
                    <td>{{revision.comment}}</td>
                  </tr>
                </tbody>
                <tfoot>
                  <tr>
                    <td>
                      SUB-NOTA
                    </td>
                    <td colspan="3">
                      {{section.percentageScore | percent}}
                    </td>
                  </tr>
                </tfoot>
              </table>
            </div>
          </div>
        </nb-card-body>
      </nb-card>
    </div>
  </div>
</div>
